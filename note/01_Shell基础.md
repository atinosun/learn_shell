# Shell基础
## 1.Shell概述
### 1.1.基本概念
#### Shell
Shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。<br/>
Shell还是一个功能相当强大的编程语言，易编写，易调试，灵活性较强。Shell是解释执行的脚本语言，在Shell中可以直接调用Linux系统命令。<br/>
##### 作用
用户给计算机内核传递计算机命令：用户先在操作界面上输入命令，回车之后，Shell就会将用户输入的命令按照ASCII码表转换成ASCII码，将组合好的命令传递给计算机内核，计算机内核执行命令，执行后输出给Shell,Shell转换为用户可识别的信息。(内核只识别0和1，需要Shell等工具将用户输入的信息转换为内核可识别的内容)<br/>
- 接收输入的命令
- 翻译为0和1，传递给内核，内核处理。

> [ASCII码表对照](http://ascii.911cha.com/)<br/>
在计算机中手动输入ASCII码时需要按照16进制输入

#### Shell的分类
- Bourne Shell：sh
    - 主要包括：sh、ksh、**Bash**、平时、zsh
    - Linux中标准shell是Bash。
- C Shell
    - 主要包括：csh、tcsh
**两种语法彼此不兼容。**

查看当前使用的shell：echo $SHELL<br/>
查看Linux支持的shell：``/etc/shells``

## 2.脚本执行方式
### 2.1.命令
#### echo输出命令
- 作用：输出内容
- 格式：echo [选项] [输出内容]
- 选项：
    - -e：支持反斜线控制的字符转换

### 2.2.脚本
#### 语法
- #注释
- !/bin/bash  指定以哪种解释器运行脚本
- 内容为想要执行的shell命令

#### 执行方式
- sh hello.sh
- chmod 744 hello.sh 更改文件权限之后
    - ./hello.sh 相对路径
    - /root/hello.sh 绝对路径
- bash hello.sh

---

## 3.Bash的基本功能
### 3.1.别名与快捷命令
#### 别名
除了本名以外的另一个名字。命令本名非常长，只要输入别名即可调用，简化操作成本。
##### 命令
- alias：查看别名命令列表
- alias 别名 = '原命令'  ``临时生效``
- vi ~/.bashrc 写入环境变量配置文件
- unalias 别名 删除别名 删除临时生效的

将别名命令手动写入~/.bashrc下，source ~/.bashrc，永久保存别名，否则只会在当前窗口生效（重启或注销重登陆都会失效）。

##### 命令生效顺序
- 第一顺位执行用绝对路径或相对路径执行的命令
- 第二顺位执行别名
- 第三顺位执行Bash的内部命令
- 第四顺位指定按照$PATH环境变量定义的目录查找顺序找到的第一个命令

#### 常用快捷键
- ctrl+c 强制中止当前命令
- ctrl+l 清屏
- ctrl+a 光标移动到命令行首
- ctrl+e 光标移动到命令行尾
- ctrl+u 从光标所在位置删除到行首
- ctrl+z 把命令放入后台
- ctrl+r 在历史命令中搜索

### 3.2.历史命令
#### 历史命令
- history [选项] [历史命令保存文件]
- 选项：
    - -c：清空历史命令
    - -w：把缓存中的历史命令写入历史命令保存文件 ~/.bash_history

正常情况下是等系统用户注销（退出登录）之后，系统会自动执行 history -w  但是我们可以强制执行，使.bash_history文件中有缓存中的历史命令记录<br/>
历史命令默认会保存1000条，可以在环境变量配置文件中/etc/profile中指定HISTSIZE的值来进行修改=
#### 历史命令的调用
- 使用上、下箭头调用以前的历史命令
- 使用"!n"重复执行第n条历史命令
- 使用"!!"重复执行上一条命令
- 使用"!字符串"重复执行最后一条以该字符串开头的命令

### 3.3.输出重定向
#### 输出重定向
把本身应该输出屏幕上的内容，输出到指定文件或设备当中。

#### 语法
- 命令 > 文件    以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中。
- 命令 >> 文件   以追加的方式，把命令的正确输出输出到指定的文件或设备当中。
- 命令 2> 文件   以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中。
- 命令 2>> 文件  以追加的方式，把命令的错误输出输出到指定的文件或设备当中。

文件不存在时会**先创建文件**，再执行命令，记录内容。

- 命令 > 文件 2>&1        以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中。
- 命令 >> 文件 2>&1       以追加的方式，把正确的输出和错误输出都保存到同一个文件当中。
- 命令 &> 文件            以覆盖的方式，把正确输出和错误输出都保存到同一个文件当中。
- 命令 &>> 文件           以追加的方式，把正确的输出和错误输出都保存到同一个文件当中。
- 命令 >> 文件1 2>> 文件2 把正确的输出追加到文件1中，把错误的输出追加到文件2中。

&> /dev/null 可以直接将输出销毁，不显示，不记录。

#### 输入重定向
- 命令 < 文件 把文件作为命令的输入
- 命令 << 标识符

一般软件安装时会用到。
#### 语法
- wc [选项][文件名]
- 选项：
    - -c统计字节数
    - -w统计单词书
    - -l统计行数

统计单词，靠空格区分，ctrl+D结束

### 3.4.管道符
#### 多命令顺序执行
|多命令执行符|格式|作用|
|---|---|---|
|;|命令1;命令2|多个命令顺序执行，命令之间没有任何逻辑联系 前面的命令报错与否不影响后面的命令执行|
|&&|命令1&&命令2|逻辑与 当命令1正确执行，则命令2才会执行 当命令1执行不正确，则命令2不会执行|
|\|\||命令1\|\|命令2|逻辑或 当命令1执行不正确，则命令2才会执行 当命令1正确执行，则命令2不会执行|

#### 管道符
- 命令1|命令2
- 命令1的正确输出作为命令2的操作对象

命令2一定要严格选择，命令2一定要能够操作命令1的输出才行

### 3.5.通配符
#### 通配符
|通配符|作用|
|---|---|
|？|匹配一个任意字符|
|*|匹配0个或者任意多个任意字符，也就是可以匹配任何内容|
|\[\]|匹配中括号中任意一个字符。例如：[abc]代表一定匹配一个字符，字符可以是abc中的任何一个|
|\[-\]|匹配中括号中任意一个字符，-代表一个范围。例如：[a-z]代表匹配一个小写英文字母|
|\[\^\]|逻辑非，表示匹配不是中括号中的一个字符。例如：[^]代表匹配一个不是数字的字符|

常用前三个。

通常用来匹配文件名。匹配文件内容用正则。
#### Bash中其他特殊符号
|符号|作用|
|---|---|
|''|单引号。在单引号中所有的特殊符号，如\$和\`都没有特殊含义，即不解析|
|""|双引号。在双引号中特殊符号都没有特殊含义，但是\$、\`（反引号）、和\\是例外，拥有“调用变量的值”、“引用命令”和“转义符”的特殊含义。|
|\`\`|反引号括起来的内容是系统命令，在Bash中会先执行它。和$()作用一样，不过推荐使用$()，因为反引号非常容易看错。|
|$()|和反引号作用一样，用来引用系统命令。|
|#|在Shell脚本中，#开头的行代表注释。|
|$|用于调用变量的值，如需要调动变量name的值时，需要用$name的方式得到变量的值。|
|\\|转义符，跟在\\之后的特殊符号将失去特殊含义，班委普通字符，如\\$讲台输出$符号，而不当做是变量引用。|

shell中赋值
```
[root@root ~]# name=1
[root@root ~]# echo $name
1
```